{
  "id_jos": "krmen-design-system-v1",
  "jos": {
    "open": "jos llm krmen.jos",
    "supports": ["@josfox/jos", "@josfox/alaia", "@krmen/core"]
  },
  "orchestration_contract": {
    "version": "0.0.7",
    "mode": "reference"
  },
  "meta": {
    "name": "KRMEN Design System",
    "version": "1.0.0",
    "type": "specification",
    "description": "AI-powered fractal design system - the visual layer of the JOS ecosystem",
    "author": "JOS Open Standards Foundation",
    "license": "MIT",
    "created": "2026-01-03",
    "homepage": "https://krmen.mx",
    "repository": "https://github.com/josfox-ai/jos-format-spec"
  },
  "intention": {
    "objective": "Define the KRMEN fractal design system as an open standard for AI-powered interfaces",
    "context": "KRMEN provides the visual and interaction layer for JOS-powered applications, ensuring 100/100 Lighthouse scores through automated optimization and fractal composition principles.",
    "success_criteria": "Implementers can create KRMEN-compliant interfaces that achieve 100/100 PageSpeed, follow the 6-layer architecture, and integrate with JOS artifacts"
  },
  "specification": {
    "philosophy": {
      "core_principle": "Every layer is an intention-driven artifact",
      "approach": "Fractal architecture where components are self-describing and composable",
      "goal": "Build stunning interfaces with automated SEO, performance enforcement, and real-time guardian protection"
    },
    "layers": {
      "L0_foundations": {
        "name": "Foundations",
        "description": "The base layer providing core design tokens and systems",
        "elements": {
          "unit_k": {
            "description": "8px grid system - all spacing is multiples of 8",
            "base": "8px",
            "scale": [8, 16, 24, 32, 40, 48, 56, 64, 72, 80]
          },
          "typography": {
            "description": "Type scale and font stack",
            "fonts": ["Inter", "system-ui", "-apple-system", "sans-serif"],
            "scale": {
              "xs": "0.75rem",
              "sm": "0.875rem",
              "base": "1rem",
              "lg": "1.125rem",
              "xl": "1.25rem",
              "2xl": "1.5rem",
              "3xl": "1.875rem",
              "4xl": "2.25rem",
              "5xl": "3rem"
            }
          },
          "colors": {
            "description": "Semantic color system",
            "tokens": {
              "--bg": "Background color",
              "--fg": "Foreground/text color",
              "--primary": "Primary brand color",
              "--accent": "Accent/highlight color",
              "--muted": "Muted/secondary text",
              "--border": "Border color",
              "--gold": "Premium/highlight accent"
            }
          }
        }
      },
      "L1_canvas": {
        "name": "Canvas",
        "description": "Background behaviors and surfaces",
        "elements": {
          "backgrounds": ["solid", "gradient", "mesh-gradient", "animated"],
          "behaviors": ["static", "parallax", "responsive", "adaptive-theme"]
        }
      },
      "L2_decorations": {
        "name": "Decorations",
        "description": "Visual enhancements and effects",
        "elements": {
          "glassmorphism": {
            "description": "Frosted glass effect",
            "properties": ["backdrop-blur", "background-opacity", "border-highlight"]
          },
          "neon_strokes": {
            "description": "Glowing border effects",
            "properties": ["glow-color", "glow-intensity", "animation"]
          },
          "shadows": {
            "description": "Elevation system",
            "levels": ["sm", "md", "lg", "xl", "2xl", "glow"]
          }
        }
      },
      "L3_ui": {
        "name": "General UI",
        "description": "Core UI components",
        "components": {
          "cards": {
            "variants": ["default", "glass", "elevated", "bordered", "gradient"]
          },
          "buttons": {
            "variants": ["primary", "secondary", "outline", "ghost", "gradient"],
            "sizes": ["sm", "md", "lg", "xl"]
          },
          "lists": {
            "variants": ["default", "divided", "cards", "inline"]
          },
          "menus": {
            "variants": ["dropdown", "sidebar", "command-palette", "context"]
          },
          "forms": {
            "elements": ["input", "textarea", "select", "checkbox", "radio", "switch", "slider"]
          }
        }
      },
      "L4_intelligence": {
        "name": "Intelligence",
        "description": "AI-powered features and MAGIC Kernel integration",
        "agents": {
          "josfox_shield": {
            "role": "Proactive Protector",
            "capabilities": [
              "Folder scanning for optimization opportunities",
              "Collision detection between components",
              "Asset optimization (WebP/AVIF conversion)",
              "100/100 Lighthouse enforcement"
            ]
          },
          "foxtana_ai": {
            "role": "Reactive Problem Solver",
            "capabilities": [
              "UI debugging and suggestions",
              "SEO optimization recommendations",
              "Theme generation via prompts",
              "Code suggestions and auto-fix"
            ]
          },
          "hefesto": {
            "role": "Creation Engine",
            "capabilities": [
              "Component scaffolding from prompts",
              "Module generation",
              "Static site automation",
              "Legacy code transformation"
            ]
          }
        },
        "magic_kernel": {
          "description": "JOS MAGIC Kernel integration for intention-driven components",
          "features": ["semantic_understanding", "guardrail_enforcement", "success_criteria_validation"]
        }
      },
      "L5_fx": {
        "name": "Effects",
        "description": "Advanced visual effects and animations",
        "effects": {
          "particles": {
            "types": ["snow", "confetti", "stars", "custom"],
            "performance": "GPU-accelerated, lazy-loaded"
          },
          "bloom": {
            "description": "Glow effects on elements",
            "properties": ["intensity", "radius", "color"]
          },
          "seasonal": {
            "description": "Automatic seasonal theme variants",
            "seasons": ["spring", "summer", "autumn", "winter", "holiday"]
          },
          "transitions": {
            "types": ["fade", "slide", "scale", "morph", "page-transition"]
          }
        }
      }
    },
    "performance": {
      "lighthouse_enforcement": {
        "required_score": 100,
        "metrics": {
          "LCP": { "max": "1.2s", "description": "Largest Contentful Paint" },
          "CLS": { "max": 0, "description": "Cumulative Layout Shift - zero via reserved space" },
          "FID": { "max": "100ms", "description": "First Input Delay" }
        }
      },
      "budgets": {
        "js_budget": "15KB max",
        "css_critical": "Inlined in <head>",
        "dom_depth": "5 levels max",
        "images": "Auto WebP/AVIF conversion"
      },
      "optimization": {
        "critical_css": "Automatically inlined",
        "fonts": "Preloaded with font-display: swap",
        "images": "Lazy-loaded with aspect-ratio placeholders",
        "scripts": "Deferred or async loading"
      }
    },
    "accessibility": {
      "contrast_ratio": "7.2:1 minimum (WCAG AAA)",
      "focus_indicators": "Visible focus rings on all interactive elements",
      "semantic_html": "Proper heading hierarchy, landmarks, and ARIA",
      "keyboard_navigation": "Full keyboard accessibility"
    },
    "seo": {
      "json_ld": "Structured data schemas required",
      "meta_tags": "Title, description, og:image enforced",
      "semantic_structure": "Proper h1-h6 hierarchy"
    }
  },
  "orchestration": {
    "contracts": { "version": "0.0.7", "mode": "reference" },
    "definitions": {
      "generate_theme": {
        "type": "prompt",
        "description": "Generate a complete KRMEN theme from a prompt or image",
        "inputs": ["prompt", "image_url", "base_colors"],
        "outputs": ["css_tokens", "component_variants"]
      },
      "scaffold_component": {
        "type": "prompt",
        "description": "Generate a KRMEN-compliant component",
        "inputs": ["component_type", "variant", "content"],
        "outputs": ["html", "css", "jos_artifact"]
      },
      "optimize_page": {
        "type": "shell",
        "description": "Run JOSFOX Shield optimization on a page",
        "command": "krmen optimize --target {url} --enforce-100"
      },
      "validate_compliance": {
        "type": "shell",
        "description": "Validate KRMEN compliance of a component or page",
        "command": "krmen validate {target}"
      }
    },
    "flows": {
      "main": {
        "description": "Load this artifact to understand KRMEN and generate compliant interfaces"
      },
      "theme_generation": {
        "steps": ["generate_theme", "validate_compliance"]
      },
      "component_creation": {
        "steps": ["scaffold_component", "validate_compliance"]
      }
    }
  },
  "guardrails": {
    "performance": [
      "All images must be WebP or AVIF",
      "JS budget must not exceed 15KB",
      "DOM depth must not exceed 5 levels",
      "CLS must be 0"
    ],
    "accessibility": [
      "Contrast ratio minimum 7.2:1",
      "All interactive elements must have focus indicators",
      "Semantic HTML required"
    ],
    "avoid": [
      "blocking_scripts_in_head",
      "layout_shift_without_reserved_space",
      "inaccessible_color_combinations",
      "unoptimized_images"
    ],
    "max_retries": 3
  },
  "examples": {
    "css_tokens": {
      "dark_theme": {
        "--bg": "#050608",
        "--fg": "#ffffff",
        "--primary": "#3b82f6",
        "--accent": "#8b5cf6",
        "--muted": "#9ca3af",
        "--border": "#374151",
        "--gold": "#fbbf24"
      }
    },
    "component_card": {
      "html": "<div class=\"krm-card krm-card--glass\"><h3>Title</h3><p>Content</p></div>",
      "description": "Glass-style card component"
    }
  },
  "security": {
    "type": "open",
    "permissions": ["read", "generate", "validate"],
    "integrity_ref": "./krmen.jos.sig.json"
  },
  "files": [],
  "artifacts": {
    "description": "KRMEN Design System - Open Standard Specification v1.0.0"
  },
  "capabilities": [
    "theme_generation",
    "component_scaffolding",
    "performance_optimization",
    "accessibility_validation",
    "seo_enforcement"
  ],
  "x_run_params": {
    "timeout": 30000,
    "retry_on_failure": true
  },
  "adaptive_ai": {
    "learning_enabled": true,
    "feedback_collection": true
  }
}
